"use strict";(self.webpackChunk_graphql_mocks_docs=self.webpackChunk_graphql_mocks_docs||[]).push([[5863],{44006:function(e,n,t){t.r(n),t.d(n,{assets:function(){return p},contentTitle:function(){return o},default:function(){return u},frontMatter:function(){return d},metadata:function(){return s},toc:function(){return c}});var r=t(28427),a=t(84397),i=(t(2784),t(30876)),l=["components"],d={id:"using-middlewares",title:"Using Middlewares"},o=void 0,s={unversionedId:"handler/using-middlewares",id:"handler/using-middlewares",title:"Using Middlewares",description:'The GraphQLHandler accepts an array of middlewares, chaining together a series of modifications to the Resolver Map (or an empty object if one does not exist). After all the Middlewares have been run the GraphQLHandler takes the final "packed" Resolver Map and applies each Resolver function to the GraphQLSchema, its types and fields.',source:"@site/docs/handler/using-middlewares.md",sourceDirName:"handler",slug:"/handler/using-middlewares",permalink:"/docs/handler/using-middlewares",draft:!1,tags:[],version:"current",frontMatter:{id:"using-middlewares",title:"Using Middlewares"},sidebar:"docs",previous:{title:"Introducing the GraphQL Handler",permalink:"/docs/handler/introducing-handler"},next:{title:"Handler State",permalink:"/docs/handler/handler-state"}},p={},c=[{value:"Adding Middlewares at Initialization",id:"adding-middlewares-at-initialization",level:2},{value:"Adding Middlewares via <code>applyMiddlewares</code>",id:"adding-middlewares-via-applymiddlewares",level:2},{value:"Options",id:"options",level:3},{value:"<code>reset</code>",id:"reset",level:4}],m={toc:c};function u(e){var n=e.components,t=(0,a.Z)(e,l);return(0,i.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"GraphQLHandler")," accepts an array of middlewares, chaining together a series of modifications to the Resolver Map (or an empty object if one does not exist). After all the Middlewares have been run the ",(0,i.kt)("inlineCode",{parentName:"p"},"GraphQLHandler"),' takes the final "packed" Resolver Map and applies each Resolver function to the ',(0,i.kt)("inlineCode",{parentName:"p"},"GraphQLSchema"),", its types and fields."),(0,i.kt)("p",null,"The specific internal mechanics of a middleware are explained in ",(0,i.kt)("a",{parentName:"p",href:"/docs/resolver-map/introducing-middlewares"},"Introducing Resolver Map Middlewares")," and the following sections."),(0,i.kt)("h2",{id:"adding-middlewares-at-initialization"},"Adding Middlewares at Initialization"),(0,i.kt)("p",null,"The most common way of applying Resolver Map Middlewares is at initialization via the ",(0,i.kt)("inlineCode",{parentName:"p"},"middlewares")," option on the ",(0,i.kt)("inlineCode",{parentName:"p"},"GraphQLHandler")," constructor."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import { GraphQLHandler, embed } from 'graphql-mocks';\nimport { middlewareA, middlewareB } from './middlewares';\n\nconst handler = new GraphQLHandler({\n  middlewares: [middlewareA, middlewareB]\n  dependencies: { graphqlSchema }\n});\n")),(0,i.kt)("h2",{id:"adding-middlewares-via-applymiddlewares"},"Adding Middlewares via ",(0,i.kt)("inlineCode",{parentName:"h2"},"applyMiddlewares")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"pathname:///api/graphql-mocks/classes/GraphQLHandler.html#applyMiddlewares"},"API documentation"))),(0,i.kt)("p",null,"After initialization of the handler middlewares can be applied via the ",(0,i.kt)("inlineCode",{parentName:"p"},"applyMiddlewares")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import { GraphQLHandler, embed } from 'graphql-mocks';\nimport { middlewareA, middlewareB } from './middlewares';\n\nconst handler = new GraphQLHandler({\n  dependencies: { graphqlSchema }\n});\n\nhandler.applyMiddlewares([falsoMiddleware, loggingMiddleware], { reset: false });\n")),(0,i.kt)("h3",{id:"options"},"Options"),(0,i.kt)("p",null,"The second argument to ",(0,i.kt)("inlineCode",{parentName:"p"},"applyMiddlewares")," is an optional object of options."),(0,i.kt)("h4",{id:"reset"},(0,i.kt)("inlineCode",{parentName:"h4"},"reset")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Default: ",(0,i.kt)("inlineCode",{parentName:"li"},"false"))),(0,i.kt)("p",null,"If ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," this option resets the middlewares used to those passed in on the first argument to ",(0,i.kt)("inlineCode",{parentName:"p"},"applyMiddlewares"),". If ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," the middlewares are added to the end of the currently existing array of middlewares."))}u.isMDXComponent=!0},30876:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return u}});var r=t(2784);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var o=r.createContext({}),s=function(e){var n=r.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=s(e.components);return r.createElement(o.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,p=d(e,["components","mdxType","originalType","parentName"]),m=s(t),u=a,h=m["".concat(o,".").concat(u)]||m[u]||c[u]||i;return t?r.createElement(h,l(l({ref:n},p),{},{components:t})):r.createElement(h,l({ref:n},p))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,l=new Array(i);l[0]=m;var d={};for(var o in n)hasOwnProperty.call(n,o)&&(d[o]=n[o]);d.originalType=e,d.mdxType="string"==typeof e?e:a,l[1]=d;for(var s=2;s<i;s++)l[s]=t[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"}}]);