"use strict";(self.webpackChunk_graphql_mocks_docs=self.webpackChunk_graphql_mocks_docs||[]).push([[518],{83463:function(e,r,t){t.r(r),t.d(r,{assets:function(){return l},contentTitle:function(){return p},default:function(){return h},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return d}});var n=t(28427),o=t(84397),a=(t(2784),t(30876)),s=["components"],i={id:"pretender",title:"Pretender"},p=void 0,c={unversionedId:"network/pretender",id:"network/pretender",title:"Pretender",description:"Pretender is a javascript library for the browser that intercepts network requests made with fetch or XMLHttpRequest. It has a straight-forward syntax for defining routes. Unlike mock service worker, which relies on service workers, pretender patches globals in order to capture requests made. This makes pretender quicker to setup than msw but sacrifices amongst other benefits; being able to see the intercepted requests in the network tab of browser developer tools. Captured network requests from pretender can be logged however (see below).",source:"@site/docs/network/pretender.md",sourceDirName:"network",slug:"/network/pretender",permalink:"/docs/network/pretender",draft:!1,tags:[],version:"current",frontMatter:{id:"pretender",title:"Pretender"},sidebar:"docs",previous:{title:"Mock Service Worker",permalink:"/docs/network/msw"},next:{title:"Express",permalink:"/docs/network/express"}},l={},d=[{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"Logging Intercepted Requests",id:"logging-intercepted-requests",level:3},{value:"Resolver Context",id:"resolver-context",level:3},{value:"API Documentation",id:"api-documentation",level:2}],u={toc:d};function h(e){var r=e.components,t=(0,o.Z)(e,s);return(0,a.kt)("wrapper",(0,n.Z)({},u,t,{components:r,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/pretenderjs/pretender"},"Pretender")," is a javascript library for the browser that intercepts network requests made with fetch or XMLHttpRequest. It has a straight-forward syntax for defining routes. Unlike ",(0,a.kt)("a",{parentName:"p",href:"/docs/network/msw"},"mock service worker"),", which relies on service workers, pretender patches globals in order to capture requests made. This makes pretender quicker to setup than ",(0,a.kt)("inlineCode",{parentName:"p"},"msw")," but sacrifices amongst other benefits; being able to see the intercepted requests in the network tab of browser developer tools. Captured network requests from pretender can be logged however (see below)."),(0,a.kt)("h2",{id:"installation"},"Installation"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"# npm\nnpm install --save-dev nock @graphql-mocks/network-pretender\n\n# yarn\nyarn add --dev nock @graphql-mocks/network-pretender\n")),(0,a.kt)("h2",{id:"usage"},"Usage"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"import Pretender from 'pretender';\nimport { pretenderHandler } from '@graphql-mocks/network-pretender';\nimport graphqlSchema from './graphql-schema';\nimport { GraphQLHandler } from 'graphql-mocks';\n\n// create or import GraphQLHandler\nconst graphqlHandler = new GraphQLHandler({\n  dependencies: { graphqlSchema }\n});\n\n// create Pretender instance\nconst server = new Pretender(function () {\n  // specify route or url to intercept with created handler via `pretenderHandler`\n  this.post('http://graphql-api.com/graphql', pretenderHandler(graphqlHandler));\n});\n")),(0,a.kt)("h3",{id:"logging-intercepted-requests"},"Logging Intercepted Requests"),(0,a.kt)("p",null,"While there isn't the network tab to check there is logging that can be added to captured requests that can help with debugging."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const server = new Pretender(function () {\n  this.post('http://graphql-api.com/graphql', pretenderHandler(graphqlHandler));\n});\n\nserver.handledRequest = function (verb, path, request) {\n  console.log(`[${verb}] @ ${path}`);\n  console.log({ request });\n};\n")),(0,a.kt)("h3",{id:"resolver-context"},"Resolver Context"),(0,a.kt)("p",null,"The pretender request object is made available within the resolver ",(0,a.kt)("inlineCode",{parentName:"p"},"context")," under the ",(0,a.kt)("inlineCode",{parentName:"p"},"pretender")," property:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function resolver(parent, args, context, info) {\n  const { pretender } = context;\n\n  // reference to the Pretender request object\n  pretender.req;\n}\n")),(0,a.kt)("h2",{id:"api-documentation"},"API Documentation"),(0,a.kt)("p",null,"See the ",(0,a.kt)("a",{parentName:"p",href:"/api/network-pretender/"},"API Documentation")," for types and more details."))}h.isMDXComponent=!0},30876:function(e,r,t){t.d(r,{Zo:function(){return l},kt:function(){return h}});var n=t(2784);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function i(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var p=n.createContext({}),c=function(e){var r=n.useContext(p),t=r;return e&&(t="function"==typeof e?e(r):s(s({},r),e)),t},l=function(e){var r=c(e.components);return n.createElement(p.Provider,{value:r},e.children)},d={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},u=n.forwardRef((function(e,r){var t=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),u=c(t),h=o,m=u["".concat(p,".").concat(h)]||u[h]||d[h]||a;return t?n.createElement(m,s(s({ref:r},l),{},{components:t})):n.createElement(m,s({ref:r},l))}));function h(e,r){var t=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=t.length,s=new Array(a);s[0]=u;var i={};for(var p in r)hasOwnProperty.call(r,p)&&(i[p]=r[p]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var c=2;c<a;c++)s[c]=t[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,t)}u.displayName="MDXCreateElement"}}]);