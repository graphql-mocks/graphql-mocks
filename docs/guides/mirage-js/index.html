<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<title data-react-helmet="true">Mirage JS | graphql-mocks</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Mirage JS | graphql-mocks"><meta data-react-helmet="true" name="description" content="// Uses the same result as &quot;With Typename&quot;"><meta data-react-helmet="true" property="og:description" content="// Uses the same result as &quot;With Typename&quot;"><meta data-react-helmet="true" property="og:url" content="http://www.graphql-mocks.com/docs/guides/mirage-js"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="http://www.graphql-mocks.com/docs/guides/mirage-js"><link rel="stylesheet" href="/styles.405527d7.css">
<link rel="preload" href="/styles.70f6f652.js" as="script">
<link rel="preload" href="/runtime~main.65658b1b.js" as="script">
<link rel="preload" href="/main.166ec37d.js" as="script">
<link rel="preload" href="/1.760658ea.js" as="script">
<link rel="preload" href="/2.becc4053.js" as="script">
<link rel="preload" href="/242.dd63d926.js" as="script">
<link rel="preload" href="/243.005cdddc.js" as="script">
<link rel="preload" href="/935f2afb.2c0d7468.js" as="script">
<link rel="preload" href="/17896441.d046d9dd.js" as="script">
<link rel="preload" href="/7aecf2c4.4e1a79dd.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<script data-domain="graphql-mocks.com" defer="defer" src="https://plausible.io/js/plausible.js"></script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="graphql-mocks logo"><strong class="navbar__title">graphql-mocks</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/getting-started/introduction">Docs</a><a target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" href="/packages">Packages &amp; API</a><a href="https://discord.gg/eJxddt2CJS" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord</a><a href="https://github.com/graphql-mocks/graphql-mocks" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="graphql-mocks logo"><strong class="navbar__title">graphql-mocks</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started/introduction">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link" href="/packages">Packages &amp; API</a></li><li class="menu__list-item"><a href="https://discord.gg/eJxddt2CJS" target="_blank" rel="noopener noreferrer" class="menu__link">Discord</a></li><li class="menu__list-item"><a href="https://github.com/graphql-mocks/graphql-mocks" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_3G3U"><div class="docSidebarContainer_2HHq" role="complementary"><div class="sidebar_1xH1"><div class="menu menu--responsive menu_3E8f"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1XLy" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started/concepts">Concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started/quick-example">Quick Example</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">GraphQL Handler</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/handler/introducing-handler">Introducing the GraphQL Handler</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/handler/using-middlewares">Using Middlewares</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/handler/handler-state">Handler State</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Resolver &amp; Wrappers </a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resolver/using-resolvers">Using Resolvers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resolver/introducing-wrappers">Introducing Resolver Wrappers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resolver/applying-wrappers">Applying Wrappers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resolver/available-wrappers">Available Wrappers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resolver/creating-wrappers">Creating Custom Wrappers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Resolver Map &amp; Middlewares</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resolver-map/using-resolver-maps">Using Resolver Maps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resolver-map/introducing-middlewares">Introducing Resolver Map Middlewares</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resolver-map/managing-resolvers">Managing Resolvers with Middlewares</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resolver-map/available-middlewares">Available Middlewares</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resolver-map/creating-middlewares">Creating Custom Middlewares</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Network Handling</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/network/introducing-network-handlers">Introducing Network Handlers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/network/msw">Mock Service Worker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/network/pretender">Pretender</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/network/express">Express</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/network/nock">Nock</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Highlight</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/highlight/introducing-highlight">Introducing Highlight</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/highlight/available-highlighters">Available Highlighters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/highlight/creating-highlighters">Create Custom Highlighters</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">GraphQL Paper</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/paper/introducing-paper">Introducing GraphQL Paper</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/paper/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/paper/querying-data">Querying Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/paper/mutating-data">Mutating Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/paper/operations">Operations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/paper/events">Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/paper/hooks">Hooks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/paper/validations">Validations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/paper/technical-notes">Technical Notes</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">GraphQL Paper Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/paper/guides/factories">Generating Data with Factories</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/paper/guides/with-graphql">Using GraphQL Paper with GraphQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/paper/guides/managing-ids">Managing IDs</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI (beta)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cli/introducing-gqlmocks">Introducing the gqlmocks CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cli/commands">CLI Commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cli/quick-mocking">Quick Mocking with Serve</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cli/gqlmocks-config">gqlmocks Config File</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/paper">Using Paper with graphql-mocks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/managing-context">Managing Resolver Context</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/automatic-filtering">Automatic Resolver Filtering with Wrappers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/relay-pagination">Relay Pagination</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/fake-data">Automatic Mocking with Fake Data using Falso</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/guides/mirage-js">Mirage JS</a></li></ul></li></ul></div></div></div><main class="docMainContainer_23gr"><div class="container padding-vert--lg docItemWrapper_3l-Z"><div class="row"><div class="col docItemCol_F4HC"><div class="docItemContainer_2MrJ"><article><header><h1 class="docTitle_2KCJ">Mirage JS</h1></header><div class="markdown"><p><a href="https://miragejs.com/" target="_blank" rel="noopener noreferrer">Mirage JS</a> is a great tool that makes mocking <em>resources</em> backed by RESTful APIs easier. One of the main benefits
of Mirage JS is that it provides a full in-memory database and ORM. This allows for mocked queries to be backed by
stateful data, much like GraphQL Paper.</p><p><strong>Note:</strong> If starting a new project it&#x27;s recommended to use <a href="/docs/paper/introducing-paper">GraphQL Paper</a>
since it is based on the GraphQL Schema and is GraphQL-first in mocking data, along with <code>graphql-mocks</code>. If a project is already using Mirage JS
then this guide will help adopt it for use with GraphQL using <code>graphql-mocks</code> and its tools.</p><p>This library provides a few ways that to extend GraphQL with Mirage JS including &quot;Auto Resolvers&quot; or by using Mirage JS
within resolver functions, or a combination of both.</p><ul><li><a href="/api/mirage" target="_blank" rel="noopener noreferrer">API documentation for <code>@graphql-mocks/mirage</code></a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="installation"></a>Installation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installation" title="Direct link to heading">#</a></h2><p>Install Mirage JS and the complementary <code>@graphql-mocks/mirage</code> package</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># npm</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --save-dev miragejs @graphql-mocks/mirage</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># yarn</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> --dev miragejs @graphql-mocks/mirage</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="mirage-js-auto-resolvers-middleware"></a>Mirage JS Auto Resolvers Middleware<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mirage-js-auto-resolvers-middleware" title="Direct link to heading">#</a></h2><p>The <code>mirageMiddleware</code> will fill the Resolver Map with Auto Resolvers where resolvers do not already exist, unless
<code>replace</code> option is provided. To control where resolvers are applied, specify the <code>highlight</code> option. The Middleware
simply applies two types of resolvers to the Resolver Map: A Type Resolver for Abstract Types (Unions and Interfaces)
and a Field Resolver for fields.</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">GraphQLHandler</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;graphql-mocks&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mirageMiddleware </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@graphql-mocks/mirage&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> handler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">GraphQLHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  middlewares</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">mirageMiddleware</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    mirageServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    graphqlSchema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><ul><li><code>mirageServer</code> is a required dependency for this middleware.</li></ul><p>Additional options on the <code>mirageMiddleware</code> include:</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-ts codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mirageMiddleware</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  highlight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">HighlightableOption</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  replace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="how-mirage-js--auto-resolving-works"></a>How Mirage JS &amp; Auto Resolving works<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-mirage-js--auto-resolving-works" title="Direct link to heading">#</a></h2><p>Mirage JS can be setup where:</p><ul><li>Models and Relationships map to GraphQL types</li><li>Model attributes map to fields on GraphQL types</li></ul><p>For example:</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-graphql codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Person</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">family</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Person</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> hasMany </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;miragejs&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  family</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hasMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;person&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>Associations between models reflect the relationships between GraphQL types. Relationships will be automatically
resolved based on the matching naming between Mirage JS models and GraphQL types. This provides the basis for the auto
resolving a GraphQL query. Auto Resolvers are applied to a Resolver map via the <code>mirageMiddlware</code> or can be imported
individually if required.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="interface-and-union-types"></a>Interface and Union Types<a aria-hidden="true" tabindex="-1" class="hash-link" href="#interface-and-union-types" title="Direct link to heading">#</a></h2><p>GraphQL Union and Interface are <em>Abstract Types</em> that represent concrete types. The <code>mirageMiddleware</code> Type Resolver
provides two different strategies for resolving and modeling Abstract Types in Mirage. Both have their pros/cons and the
best fit will depend on the use case. The accompanying examples are a bit verbose but demonstrate the extent of setting
up these use cases. Both are setup with the same GraphQL Schema, query and return the same result. The <code>__typename</code> has
been queried also to show the resolved discrete type.</p><p>The GraphQL Schema for these examples is:</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  schema {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    query: Query</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Query {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    person: Person!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Person {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    favoriteMedium: [Media]!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  union Media = Movie | TV | Book | Magazine</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  interface MovingPicture {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    title: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    durationInMinutes: Int!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  interface WrittenMedia {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    title: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    pageCount: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Movie implements MovingPicture {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    title: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    durationInMinutes: Int!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    director: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type TV implements MovingPicture {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    title: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    episode: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    durationInMinutes: Int!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    network: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Book implements WrittenMedia {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    title: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    author: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    pageCount: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Magazine implements WrittenMedia {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    title: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    issue: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    pageCount: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c"></span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>This GraphQL schema has the following:</p><ul><li>Four GraphQL Concrete Types: <code>Movie</code>, <code>TV</code>, <code>Book</code>, and <code>Magazine</code></li><li>All four Concrete types are in a GraphQL Union called <code>Media</code></li><li><code>Movie</code> and <code>TV</code> implement a <code>MovingPicture</code> interface</li><li><code>Book</code> and <code>Magazine</code> implement a <code>WrittenMedia</code> interface</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="one-model-per-abstract-type"></a>One Model per Abstract Type<a aria-hidden="true" tabindex="-1" class="hash-link" href="#one-model-per-abstract-type" title="Direct link to heading">#</a></h3><p>In this case a Mirage model (<code>Media</code>) is setup for the Abstract type itself, and instances specify their concrete type
by the <code>__typename</code> attribute on the model, like <code>__typename: &#x27;Movie&#x27;</code>. This option is easier and faster to setup but
can become harder to manage and requires remembering to specify the <code>__typename</code> model attribute on each instance
created.</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">GraphQLHandler</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;graphql-mocks&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mirageMiddleware </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@graphql-mocks/mirage&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> hasMany </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;miragejs&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> extractDependencies </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;graphql-mocks/resolver&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> graphqlSchema </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./abstract-type-schema.source&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mirageServer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  models</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Person</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      favoriteMedium</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hasMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;media&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// using a single model to represent _all_ the concrete types</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Media</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// All models created are for &quot;media&quot;, but have their</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// concrete type specified via __typename</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> movie </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;media&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;The Darjeeling Limited&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  durationInMinutes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">104</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  director</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Wes Anderson&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  __typename</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Movie&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> tvShow </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;media&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Malcolm in the Middle&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  episode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Rollerskates&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  network</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Fox&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  durationInMinutes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">24</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  __typename</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;TV&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> book </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;media&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;The Hobbit, or There and Back Again&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;J.R.R. Tolkien&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  pageCount</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">310</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  __typename</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Book&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> magazine </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;media&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Lighthouse Digest&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  issue</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;May/June 2020&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  pageCount</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  __typename</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Magazine&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;person&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  favoriteMedium</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">movie</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tvShow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> book</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> magazine</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> graphqlHandler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">GraphQLHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  resolverMap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Query</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">person</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">_parent</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> _args</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mirageServer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">extractDependencies</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;mirageServer&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">people</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">first</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  middlewares</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">mirageMiddleware</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    graphqlSchema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    mirageServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> graphqlHandler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    person {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      favoriteMedium {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        __typename</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        ... on MovingPicture {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          title</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          durationInMinutes</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        ... on Movie {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          director</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        ... on TV {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          episode</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          network</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        ... on WrittenMedia {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          title</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          pageCount</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        ... on Book {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          author</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        ... on Magazine {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          issue</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c"></span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><strong>Result: </strong><pre class="graphql-result">{
  &quot;data&quot;: {
    &quot;person&quot;: {
      &quot;favoriteMedium&quot;: [
        {
          &quot;title&quot;: &quot;The Darjeeling Limited&quot;,
          &quot;director&quot;: &quot;Wes Anderson&quot;,
          &quot;durationInMinutes&quot;: 104,
          &quot;__typename&quot;: &quot;Movie&quot;
        },
        {
          &quot;title&quot;: &quot;Malcolm in the Middle&quot;,
          &quot;durationInMinutes&quot;: 24,
          &quot;episode&quot;: &quot;Rollerskates&quot;,
          &quot;network&quot;: &quot;Fox&quot;,
          &quot;__typename&quot;: &quot;TV&quot;
        },
        {
          &quot;title&quot;: &quot;The Hobbit, or There and Back Again&quot;,
          &quot;author&quot;: &quot;J.R.R. Tolkien&quot;,
          &quot;pageCount&quot;: &quot;310&quot;,
          &quot;__typename&quot;: &quot;Book&quot;
        },
        {
          &quot;title&quot;: &quot;Lighthouse Digest&quot;,
          &quot;issue&quot;: &quot;May/June 2020&quot;,
          &quot;pageCount&quot;: &quot;42&quot;,
          &quot;__typename&quot;: &quot;Magazine&quot;
        }
      ]
    }
  }
}</pre><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="one-model-per-concrete-type"></a>One Model per Concrete Type<a aria-hidden="true" tabindex="-1" class="hash-link" href="#one-model-per-concrete-type" title="Direct link to heading">#</a></h3><p>This option allows for each discrete type to be represented by its own Mirage Model definition. A relationship attribute
that can hold an Abstract type should specify the <code>{ polymorphic: true }</code> option on the
<a href="https://miragejs.com/docs/main-concepts/relationships/#polymorphic" target="_blank" rel="noopener noreferrer">relationship definition</a>. This option sets up for
distinct definitions but can also be more verbose.</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">GraphQLHandler</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;graphql-mocks&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mirageMiddleware </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@graphql-mocks/mirage&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> hasMany </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;miragejs&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> extractDependencies </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;graphql-mocks/resolver&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> graphqlSchema </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./abstract-type-schema.source&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mirageServer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  models</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Person</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// represent the abstract type with a polymorphic relationship</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      favoriteMedium</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hasMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> polymorphic</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// model definition exists for each discrete type</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Movie</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token constant" style="color:#36acaa">TV</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Book</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Magazine</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> movie </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;movie&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;The Darjeeling Limited&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  durationInMinutes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">104</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  director</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Wes Anderson&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> tv </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;tv&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Malcolm in the Middle&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  episode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Rollerskates&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  network</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Fox&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  durationInMinutes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">24</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> book </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;book&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;The Hobbit, or There and Back Again&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;J.R.R. Tolkien&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  pageCount</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">310</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> magazine </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;magazine&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Lighthouse Digest&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  issue</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;May/June 2020&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  pageCount</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;person&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  favoriteMedium</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">movie</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> book</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> magazine</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> graphqlHandler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">GraphQLHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  resolverMap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Query</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">person</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">_parent</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> _args</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mirageServer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">extractDependencies</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;mirageServer&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">people</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">first</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  middlewares</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">mirageMiddleware</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    graphqlSchema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    mirageServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> graphqlHandler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    person {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      favoriteMedium {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        __typename</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        ... on MovingPicture {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          title</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          durationInMinutes</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        ... on Movie {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          director</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        ... on TV {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          episode</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          network</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        ... on WrittenMedia {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          title</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          pageCount</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        ... on Book {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          author</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        ... on Magazine {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          issue</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c"></span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><strong>Result: </strong><pre class="graphql-result">{
  &quot;data&quot;: {
    &quot;person&quot;: {
      &quot;favoriteMedium&quot;: [
        {
          &quot;title&quot;: &quot;The Darjeeling Limited&quot;,
          &quot;director&quot;: &quot;Wes Anderson&quot;,
          &quot;durationInMinutes&quot;: 104,
          &quot;__typename&quot;: &quot;Movie&quot;
        },
        {
          &quot;title&quot;: &quot;Malcolm in the Middle&quot;,
          &quot;durationInMinutes&quot;: 24,
          &quot;episode&quot;: &quot;Rollerskates&quot;,
          &quot;network&quot;: &quot;Fox&quot;,
          &quot;__typename&quot;: &quot;TV&quot;
        },
        {
          &quot;title&quot;: &quot;The Hobbit, or There and Back Again&quot;,
          &quot;author&quot;: &quot;J.R.R. Tolkien&quot;,
          &quot;pageCount&quot;: &quot;310&quot;,
          &quot;__typename&quot;: &quot;Book&quot;
        },
        {
          &quot;title&quot;: &quot;Lighthouse Digest&quot;,
          &quot;issue&quot;: &quot;May/June 2020&quot;,
          &quot;pageCount&quot;: &quot;42&quot;,
          &quot;__typename&quot;: &quot;Magazine&quot;
        }
      ]
    }
  }
}</pre><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="mock-the-graphql-endpoint-using-mirage-js-route-handlers"></a>Mock the GraphQL Endpoint using Mirage JS Route Handlers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mock-the-graphql-endpoint-using-mirage-js-route-handlers" title="Direct link to heading">#</a></h2><p>A GraphQL handler handles the mocked responses for GraphQL queries and mutations. However, GraphQL is agnostic to the
network transport layer. Typically, GraphQL clients do use HTTP and luckily Mirage JS comes with out-of-the-box XHR
interception and route handlers to mock this as well. GraphQL API Servers operate on a single endpoint for a query so
only one route handler is needed. Migrating to other mocked networking methods later is easy as well.</p><p>Use <code>createRouteHandler</code> to get setup with a mocked GraphQL endpoint. Specify the same options as the <code>GraphQLHandler</code>
constructor or specify a <code>GraphQLHandler</code> instance. This example sets up a GraphQLHandler on the <code>graphql</code> route.</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createServer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;miragejs&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createRouteHandler</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mirageMiddleware </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@graphql-mocks/mirage&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">routes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// capture mirageServer dependency</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mirageServer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// create a route handler for POSTs to `/graphql`</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// using `createRouteHandler`</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;graphql&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">createRouteHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        middlewares</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">mirageMiddleware</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          mirageServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          graphqlSchema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>The <code>MirageServer</code> instance can be referenced by <code>this</code> within the <code>routes()</code> function and must be passed in as the
<code>mirageServer</code> dependency. See the
<a href="https://miragejs.com/docs/main-concepts/route-handlers/" target="_blank" rel="noopener noreferrer">Mirage JS route handlers documentation</a> for more information
about mocking HTTP endpoints with route handlers.</p><p>Note: The rest of the examples skip this part and focus on <code>graphql-mocks</code> and Mirage JS configuration and examples.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="relay-pagination"></a>Relay Pagination<a aria-hidden="true" tabindex="-1" class="hash-link" href="#relay-pagination" title="Direct link to heading">#</a></h2><p>Use the <code>relayWrapper</code> for quick relay pagination. It must be <em>after</em> the Mirage JS Middleware. The <code>@graphql-mocks/mirage</code> package
provides a <code>mirageCursorForNode</code> function to be used for the required <code>cursorForNode</code> argument.</p><p>Check out the <a href="/docs/guides/relay-pagination">Relay Wrapper documentation</a> for more details.</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">GraphQLHandler</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;graphql-mocks&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mirageCursorForNode </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@graphql-mocks/mirage&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> handler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">GraphQLHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  middlewares</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">mirageMiddleware</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">embed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      wrappers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">relayWrapper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> cursorForNode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mirageCursorForNode </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    mirageServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    graphqlSchema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="examples"></a>Examples<a aria-hidden="true" tabindex="-1" class="hash-link" href="#examples" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="basic-query"></a>Basic Query<a aria-hidden="true" tabindex="-1" class="hash-link" href="#basic-query" title="Direct link to heading">#</a></h3><p>This example shows the result of querying with Auto Resolvers against Mirage Models with relationships (between a Wizard
and their spells). It uses the <code>mirageMiddlware</code> middlware, sets up dependencies and runs a query. The mutations will
persist as part of Mirage JS&#x27;s in-memory database for future mutations and queries.</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">GraphQLHandler</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;graphql-mocks&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mirageMiddleware </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@graphql-mocks/mirage&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> hasMany </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;miragejs&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Define GraphQL Schema</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> graphqlSchema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  schema {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    query: Query</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Query {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    movies: [Movie!]!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Movie {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    title: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    actors: [Actor!]!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Actor {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    name: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c"></span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Create the mirage server and schema</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mirageServer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  models</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Actor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Movie</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      actors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hasMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Create model instances</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> meryl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;actor&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Meryl Streep&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> bill </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;actor&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Bill Murray&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> anjelica </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;actor&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Anjelica Huston&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;movie&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Fantastic Mr. Fox&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  actors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">meryl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bill</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;movie&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;The Life Aquatic with Steve Zissou&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  actors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">bill</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> anjelica</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> graphqlHandler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">GraphQLHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  middlewares</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">mirageMiddleware</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    graphqlSchema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    mirageServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> graphqlHandler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    movies {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      title</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      actors {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        name</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c"></span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div> <strong>Result: </strong><pre class="graphql-result">{
  &quot;data&quot;: {
    &quot;movies&quot;: [
      {
        &quot;title&quot;: &quot;Fantastic Mr. Fox&quot;,
        &quot;actors&quot;: [
          {
            &quot;name&quot;: &quot;Meryl Streep&quot;
          },
          {
            &quot;name&quot;: &quot;Bill Murray&quot;
          }
        ]
      },
      {
        &quot;title&quot;: &quot;The Life Aquatic with Steve Zissou&quot;,
        &quot;actors&quot;: [
          {
            &quot;name&quot;: &quot;Bill Murray&quot;
          },
          {
            &quot;name&quot;: &quot;Anjelica Huston&quot;
          }
        ]
      }
    ]
  }
}</pre><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="mutations-create-update-delete"></a>Mutations (Create, Update, Delete)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mutations-create-update-delete" title="Direct link to heading">#</a></h3><p>GraphQL Mutations can be done with static resolvers and a reference to the <code>mirageServer</code> dependency using the
<code>extractDependencies</code> function.</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token function-variable function" style="color:#d73a49">resolverFunction</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">root</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> args</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> context</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mirageServer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">extractDependencies</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;mirageServer&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="create-example-with-input-variables"></a>Create Example with Input Variables<a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-example-with-input-variables" title="Direct link to heading">#</a></h4><p>This example creates a new instance of a Wizard model on the Mirage JS using a GraphQL Input Type.</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">GraphQLHandler</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;graphql-mocks&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;miragejs&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> extractDependencies </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;graphql-mocks/resolver&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mirageServer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  models</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Movie</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> graphqlSchema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  schema {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    query: Query</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    mutation: Mutation</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Query {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    Movie: [Movie!]!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Mutation {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    # Create mutation</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    addMovie(input: AddMovieInput): Movie!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Movie {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    id: ID!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    title: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    style: MovieStyle!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  input AddMovieInput {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    title: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    style: MovieStyle!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  enum MovieStyle {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    LiveAction</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    StopMotion</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    Animated</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c"></span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Represents the resolverMap with our static Resolver Function</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// using `extractDependencies` to handle the input args and</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// return the added Movie</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resolverMap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">Mutation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">addMovie</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">_root</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> args</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> context</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> _info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mirageServer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">extractDependencies</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;mirageServer&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> addedMovie </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">movies</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">title</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        style</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">style</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> addedMovie</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> handler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">GraphQLHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  resolverMap</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    graphqlSchema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    mirageServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mutation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> handler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    mutation($movie: AddMovieInput) {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      addMovie(input: $movie) {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        id</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        title</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        style</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Pass external variables for the mutation</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    movie</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Isle of Dogs&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      style</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;StopMotion&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">mutation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div> <strong>Result: </strong><pre class="graphql-result">{
  &quot;data&quot;: {
    &quot;addMovie&quot;: {
      &quot;id&quot;: &quot;1&quot;,
      &quot;title&quot;: &quot;Isle of Dogs&quot;,
      &quot;style&quot;: &quot;StopMotion&quot;
    }
  }
}</pre><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="update-example"></a>Update Example<a aria-hidden="true" tabindex="-1" class="hash-link" href="#update-example" title="Direct link to heading">#</a></h4><p>In this example Voldemort, Tom Riddle, has mistakenly been put into the wrong Hogwarts house. Using the <code>updateHouse</code>
mutation will take his Model ID, the correct House, and return the updated data. The <code>resolverMap</code> has a <code>updateHouse</code>
Resolver Function that will handle this mutation and update the within Mirage JS.</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">GraphQLHandler</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;graphql-mocks&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;miragejs&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> extractDependencies </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;graphql-mocks/resolver&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mirageServer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  models</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    movie</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Create the movie &quot;The Royal Tenenbaums&quot; in Mirage JS</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Whoops! It&#x27;s been assigned the wrong year but we can</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// fix this via a GraphQL Mutation</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> royalTenenbaums </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;movie&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;The Royal Tenenbaums&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  year</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2020&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> graphqlSchema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  schema {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    query: Query</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    mutation: Mutation</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Query {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    movies: [Movie!]!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Mutation {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    # Update</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    updateYear(movieId: ID!, year: String!): Movie!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Movie {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    id: ID!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    name: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    year: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c"></span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resolverMap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">Mutation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">updateYear</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">_root</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> args</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> context</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> _info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mirageServer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">extractDependencies</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;mirageServer&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// lookup and update the year on the movie with args</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> movie </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">movies</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">movieId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      movie</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">year</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">year</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      movie</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> movie</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> handler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">GraphQLHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  resolverMap</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    graphqlSchema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    mirageServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mutation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> handler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    mutation($movieId: ID!, $year: String!) {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      updateYear(movieId: $movieId, year: $year) {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        id</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        name</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        year</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Pass external variables for the mutation</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    movieId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> royalTenenbaums</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// corresponds with the model we created above</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    year</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2001&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">mutation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div> <strong>Result: </strong><pre class="graphql-result">{
  &quot;data&quot;: {
    &quot;updateYear&quot;: {
      &quot;id&quot;: &quot;1&quot;,
      &quot;name&quot;: &quot;The Royal Tenenbaums&quot;,
      &quot;year&quot;: &quot;2001&quot;
    }
  }
}</pre><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="delete-example"></a>Delete Example<a aria-hidden="true" tabindex="-1" class="hash-link" href="#delete-example" title="Direct link to heading">#</a></h4><p>Removing Voldemort&#x27;s entry in the Mirage JS database can be done through a <code>removeWizard</code> mutation. The <code>resolverMap</code>
has a <code>removeWizard</code> Resolver Function that will handle this mutation and update the within Mirage JS.</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">GraphQLHandler</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;graphql-mocks&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;miragejs&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> extractDependencies </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;graphql-mocks/resolver&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mirageServer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  models</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    movie</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> grandBudapestHotel </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;movie&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;The Grand Budapest Hotel&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> hamilton </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;movie&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Hamilton&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> graphqlSchema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  schema {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    query: Query</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    mutation: Mutation</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Query {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    movies: [Movie!]!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Mutation {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    # Remove</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    removeMovie(movieId: ID!): Movie!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Movie {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    id: ID!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    title: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c"></span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resolverMap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">Mutation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">removeMovie</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">_root</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> args</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> context</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> _info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mirageServer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">extractDependencies</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;mirageServer&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> movie </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">movies</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">movieId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      movie</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">destroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> movie</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> handler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">GraphQLHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  resolverMap</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    graphqlSchema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    mirageServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mutation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> handler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    mutation($movieId: ID!) {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      removeMovie(movieId: $movieId) {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        id</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        title</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Pass external variables for the mutation</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    movieId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hamilton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">mutation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div> <strong>Result: </strong><pre class="graphql-result">{
  &quot;data&quot;: {
    &quot;removeMovie&quot;: {
      &quot;id&quot;: &quot;2&quot;,
      &quot;title&quot;: &quot;Hamilton&quot;
    }
  }
}</pre><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="static-resolver-functions"></a>Static Resolver Functions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#static-resolver-functions" title="Direct link to heading">#</a></h3><p>Mirage JS can be used directly in static Resolver Functions in a Resolver Map by using the <code>extractDependencies</code>
utility. This technique can be with <a href="#mutations-create-update-delete">Mutations</a>, and Query Resolver Functions to bypass
Auto Resolving while still having access to Mirage. This is usually done when fine-grained control is needed.</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">GraphQLHandler</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;graphql-mocks&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> extractDependencies </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;graphql-mocks/resolver&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mirageMiddleware </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@graphql-mocks/mirage&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;miragejs&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> graphqlSchema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  schema {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    query: Query</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Query {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    movies: [Movie!]!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  type Movie {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    name: String!</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c"></span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mirageServer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  models</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Movie</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;movie&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Moonrise Kingdom&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;movie&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;The Darjeeling Limited&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;movie&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Bottle Rocket&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resolverMap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">Query</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">movies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">_parent</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> _args</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> context</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> _info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mirageServer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">extractDependencies</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;mirageServer&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> mirageServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">movies</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">models</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> handler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">GraphQLHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  resolverMap</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Note: the `mirageMiddleware` is only required for handling downstream</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// mirage relationships from the returned models. Non-relationship</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// attributes on the model will &quot;just work&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  middlewares</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">mirageMiddleware</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    graphqlSchema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    mirageServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> handler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    movies {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      name</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c"></span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div> <strong>Result: </strong><pre class="graphql-result">{
  &quot;data&quot;: {
    &quot;movies&quot;: [
      {
        &quot;name&quot;: &quot;Moonrise Kingdom&quot;
      },
      {
        &quot;name&quot;: &quot;The Darjeeling Limited&quot;
      },
      {
        &quot;name&quot;: &quot;Bottle Rocket&quot;
      }
    ]
  }
}</pre><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="comparison-with-miragejsgraphql"></a>Comparison with <code>miragejs/graphql</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#comparison-with-miragejsgraphql" title="Direct link to heading">#</a></h2><p>Mirage JS has a GraphQL solution, <code>miragejs/graphql</code>, that leverages mirage &amp; graphql automatic mocking and sets up
models on the mirage schema automatically. <code>graphql-mocks</code> with <code>@graphql-mocks/mirage </code> do a few things differently
than <code>miragejs/graphql</code>.</p><ul><li>This library focuses on providing a flexible GraphQL-first mocking experience using Middlewares and Wrappers, and
mainly uses Mirage JS as a stateful store. While Mirage JS focuses on mocking REST and uses <code>@miragejs/graphql</code> as an
extension to provide GraphQL resolving.</li><li>This library also does not apply automatic filtering like <code>@miragejs/graphql</code> as this tends to be highly specific to
the individual GraphQL API. The same result, however, can be achieved by using a Resolver Wrapper, see
<a href="/docs/guides/automatic-filtering">Automatic Filtering with Wrappers</a> for examples.</li><li>This library currently does not setup the Mirage JS Schema with Models and relationships based on the GraphQL Schema
but aims at adding this as a configuration option in the future (PRs are welcome).</li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/guides/fake-data"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Automatic Mocking with Fake Data using Falso</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3-RU"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link">Installation</a></li><li><a href="#mirage-js-auto-resolvers-middleware" class="table-of-contents__link">Mirage JS Auto Resolvers Middleware</a></li><li><a href="#how-mirage-js--auto-resolving-works" class="table-of-contents__link">How Mirage JS &amp; Auto Resolving works</a></li><li><a href="#interface-and-union-types" class="table-of-contents__link">Interface and Union Types</a><ul><li><a href="#one-model-per-abstract-type" class="table-of-contents__link">One Model per Abstract Type</a></li><li><a href="#one-model-per-concrete-type" class="table-of-contents__link">One Model per Concrete Type</a></li></ul></li><li><a href="#mock-the-graphql-endpoint-using-mirage-js-route-handlers" class="table-of-contents__link">Mock the GraphQL Endpoint using Mirage JS Route Handlers</a></li><li><a href="#relay-pagination" class="table-of-contents__link">Relay Pagination</a></li><li><a href="#examples" class="table-of-contents__link">Examples</a><ul><li><a href="#basic-query" class="table-of-contents__link">Basic Query</a></li><li><a href="#mutations-create-update-delete" class="table-of-contents__link">Mutations (Create, Update, Delete)</a></li><li><a href="#static-resolver-functions" class="table-of-contents__link">Static Resolver Functions</a></li></ul></li><li><a href="#comparison-with-miragejsgraphql" class="table-of-contents__link">Comparison with <code>miragejs/graphql</code></a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright © 2022 by <a href="https://www.github.com/chadian">chadian</a></div></div></div></footer></div>
<script src="/styles.70f6f652.js"></script>
<script src="/runtime~main.65658b1b.js"></script>
<script src="/main.166ec37d.js"></script>
<script src="/1.760658ea.js"></script>
<script src="/2.becc4053.js"></script>
<script src="/242.dd63d926.js"></script>
<script src="/243.005cdddc.js"></script>
<script src="/935f2afb.2c0d7468.js"></script>
<script src="/17896441.d046d9dd.js"></script>
<script src="/7aecf2c4.4e1a79dd.js"></script>
</body>
</html>