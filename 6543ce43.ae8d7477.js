(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{102:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),l=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},b=function(e){var t=l(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},u=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),b=l(n),u=r,m=b["".concat(c,".").concat(u)]||b[u]||d[u]||o;return n?a.a.createElement(m,i(i({ref:t},s),{},{components:n})):a.a.createElement(m,i({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,c=new Array(o);c[0]=u;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:r,c[1]=i;for(var s=2;s<o;s++)c[s]=n[s];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},69:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return i})),n.d(t,"default",(function(){return s}));var r=n(2),a=(n(0),n(102));const o={id:"events",title:"Events"},c={unversionedId:"paper/events",id:"paper/events",isDocsHomePage:!1,title:"Events",description:"After a Mutate Transaction any relevant events will be dispatched followed by any events that have been queued. This is useful for responding to specific changes either from GraphQL Paper or custom events that might have been dispatched in a custom operation or the Mutate Transaction itself via the queueEvent operation.",source:"@site/docs/paper/events.md",slug:"/paper/events",permalink:"/docs/paper/events",version:"current",sidebar:"docs",previous:{title:"Operations",permalink:"/docs/paper/operations"},next:{title:"Hooks",permalink:"/docs/paper/hooks"}},i=[{value:"Listening to Events",id:"listening-to-events",children:[]},{value:"Library Events",id:"library-events",children:[{value:"<code>create</code>",id:"create",children:[]},{value:"<code>remove</code>",id:"remove",children:[]},{value:"<code>modify</code>",id:"modify",children:[]}]},{value:"Custom Events",id:"custom-events",children:[]}],p={rightToc:i};function s({components:e,...t}){return Object(a.b)("wrapper",Object(r.a)({},p,t,{components:e,mdxType:"MDXLayout"}),Object(a.b)("p",null,"After a ",Object(a.b)("em",{parentName:"p"},"Mutate Transaction")," any relevant events will be dispatched followed by any events that have been queued. This is useful for responding to specific changes either from GraphQL Paper or custom events that might have been dispatched in a custom operation or the ",Object(a.b)("em",{parentName:"p"},"Mutate Transaction")," itself via the ",Object(a.b)("inlineCode",{parentName:"p"},"queueEvent")," operation."),Object(a.b)("h2",{id:"listening-to-events"},"Listening to Events"),Object(a.b)("p",null,"Events are available via the ",Object(a.b)("inlineCode",{parentName:"p"},"events")," property on the ",Object(a.b)("inlineCode",{parentName:"p"},"Paper")," instance which follow the ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/EventTarget"}),Object(a.b)("inlineCode",{parentName:"a"},"EventTarget")," pattern"),"."),Object(a.b)("p",null,"To listen for an event use ",Object(a.b)("inlineCode",{parentName:"p"},"events.addEventListener"),", for example to listen for the ",Object(a.b)("inlineCode",{parentName:"p"},"create")," event."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"paper.addEventListener('create', (event) => {\n // do something with the `create` event\n});\n")),Object(a.b)("p",null,Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener"}),Object(a.b)("inlineCode",{parentName:"a"},"removeEventListener"))," is also available to stop listening for an event for a particular listener."),Object(a.b)("h2",{id:"library-events"},"Library Events"),Object(a.b)("p",null,"The following events are provided by default from GraphQL Paper when a document is created, removed, or modified."),Object(a.b)("h3",{id:"create"},Object(a.b)("inlineCode",{parentName:"h3"},"create")),Object(a.b)("p",null,"When a document is created from a transaction a ",Object(a.b)("inlineCode",{parentName:"p"},"create")," event is dispatched with the following properties:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"{\n  // the current `DocumentStore`\n  store,\n\n  // the created `Document`\n  document\n}\n")),Object(a.b)("h3",{id:"remove"},Object(a.b)("inlineCode",{parentName:"h3"},"remove")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"{\n  // the current `DocumentStore`\n  store,\n\n  // the removed `Document`\n  document\n}\n")),Object(a.b)("h3",{id:"modify"},Object(a.b)("inlineCode",{parentName:"h3"},"modify")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"{\n  // the current `DocumentStore`\n  store,\n\n  // the modified `Document`\n  document,\n\n  // object with changes per property on the document\n  changes\n}\n")),Object(a.b)("p",null,"The ",Object(a.b)("inlineCode",{parentName:"p"},"changes")," property lists the changes per key, for example if ",Object(a.b)("inlineCode",{parentName:"p"},"changedPropertyOnDocument")," changed on the document the ",Object(a.b)("inlineCode",{parentName:"p"},"changes")," property would look:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"{\n  changedPropertyOnDocument: {\n    propertyName: 'changedPropertyOnDocument',\n    value: 'current value of changedPropertyOnDocument',\n    previousValue: 'previous value of changedPropertyOnDocument',\n  }\n}\n")),Object(a.b)("h2",{id:"custom-events"},"Custom Events"),Object(a.b)("p",null,"Any instance of ",Object(a.b)("inlineCode",{parentName:"p"},"Event")," that is added either via ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/paper/mutating-data#queueevent"}),Object(a.b)("inlineCode",{parentName:"a"},"queueEvent")," operation")," or in a custom operation and pushed to the ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/paper/operations#operational-context"}),Object(a.b)("inlineCode",{parentName:"a"},"eventQueue")," array on the context")," will be dispatched after the transaction is complete and after the library events have been dispatched."))}s.isMDXComponent=!0}}]);